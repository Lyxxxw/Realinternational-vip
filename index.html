<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real International | VIP Strategic Investment Cockpit</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        :root {
            --brand-gold: #b0955b;
            --bg-cream: #f3eee4;
            --forest-green: #17433a;
            --sage-green: #99b2ac;
            --gray-text: #717375;
            --pure-white: #ffffff;
            --deep-black: #0a0a0b;
        }

        body { 
            font-family: 'Inter', sans-serif; 
            background-color: var(--bg-cream); 
            color: var(--deep-black); 
            margin: 0; padding: 0;
            -webkit-font-smoothing: antialiased;
        }

        .nav-active {
            background-color: var(--pure-white);
            color: var(--forest-green) !important;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            font-weight: 700;
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.98);
            border: 1px solid rgba(176, 149, 91, 0.2);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
            border-radius: 1.5rem;
        }

        .chart-container { position: relative; width: 100%; height: 260px; }

        /* Vibe logic */
        .vibe-defensive { border-left: 5px solid #e5e7eb; } 
        .vibe-growth { border-left: 5px solid var(--brand-gold); } 
        .vibe-stable { border-left: 5px solid var(--sage-green); } 

        .no-scrollbar::-webkit-scrollbar { display: none; }
        
        /* 避免白屏：使用透明度控制页面切换 */
        .view-section { 
            position: absolute; 
            opacity: 0; 
            pointer-events: none; 
            visibility: hidden;
            z-index: -1;
            width: 100%;
        }
        .view-section.active { 
            position: relative; 
            opacity: 1; 
            pointer-events: auto; 
            visibility: visible;
            z-index: 1;
            animation: fadeIn 0.4s ease-out forwards; 
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* 滑块样式 (Slider) */
        input[type=range] {
            -webkit-appearance: none;
            width: 100%;
            background: transparent;
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 24px;
            width: 24px;
            border-radius: 50%;
            background: var(--brand-gold);
            cursor: pointer;
            margin-top: -10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 6px;
            cursor: pointer;
            background: #e2e8f0;
            border-radius: 3px;
        }
    </style>
</head>

<body class="flex flex-col md:flex-row h-screen overflow-hidden">

    <!-- Sidebar Navigation -->
    <aside class="w-full md:w-80 bg-[#17433a] flex flex-col z-30 shadow-xl overflow-y-auto">
        <div class="p-8">
            <!-- Logo -->
            <div class="mb-10 cursor-pointer" onclick="window.open('https://realinternational.com/', '_blank')">
                <img id="company-logo" src="./logo.png" alt="Real International Logo" class="w-64 h-auto object-contain object-left" onerror="this.onerror=null; this.outerHTML='<div class=\\'flex items-center gap-3\\'><div class=\\'w-12 h-12 border-2 border-[#b0955b] flex items-center justify-center text-[#b0955b] font-black text-2xl\\'>R</div><div><h1 class=\\'font-extrabold text-white text-2xl leading-none tracking-tight\\'>REAL <span class=\\'text-[#b0955b]\\'>INT\\'L</span></h1><p class=\\'text-[#b0955b] text-[0.6rem] font-bold uppercase tracking-[0.3em] mt-1\\'>Capital Advisory</p></div></div>';" />
            </div>

            <nav class="space-y-2">
                <button onclick="showSection('overview')" id="nav-overview" class="nav-btn w-full flex items-center gap-4 px-6 py-4 rounded-xl text-sm text-white/70 hover:text-white transition-all nav-active">
                    <i class="fa-solid fa-chart-line w-5"></i> Portfolio Snapshot
                </button>
                <button onclick="showSection('portfolio')" id="nav-portfolio" class="nav-btn w-full flex items-center gap-4 px-6 py-4 rounded-xl text-sm text-white/70 hover:text-white transition-all">
                    <i class="fa-solid fa-microscope w-5"></i> Asset Tracker
                </button>
                <button onclick="showSection('simulator')" id="nav-simulator" class="nav-btn w-full flex items-center gap-4 px-6 py-4 rounded-xl text-sm text-white/70 hover:text-white transition-all">
                    <i class="fa-solid fa-sliders w-5"></i> Exit Simulator
                </button>
                <button onclick="showSection('news')" id="nav-news" class="nav-btn w-full flex items-center gap-4 px-6 py-4 rounded-xl text-sm text-white/70 hover:text-white transition-all">
                    <i class="fa-regular fa-newspaper w-5"></i> Company Insights
                </button>
                <button onclick="showSection('vault')" id="nav-vault" class="nav-btn w-full flex items-center gap-4 px-6 py-4 rounded-xl text-sm text-white/70 hover:text-white transition-all">
                    <i class="fa-solid fa-vault w-5"></i> Document Vault
                </button>
            </nav>
        </div>

        <div class="mt-auto p-8 border-t border-white/10 bg-black/5">
            <div class="flex items-center gap-4 mb-8 text-white">
                <div class="w-12 h-12 rounded-xl bg-[#99b2ac]/20 border border-white/20 flex items-center justify-center font-bold italic shadow-inner">CC</div>
                <div>
                    <p class="text-sm font-bold tracking-tight">Chin Chang</p>
                    <p class="text-[10px] text-[#99b2ac] font-black uppercase tracking-tighter italic underline decoration-[#b0955b]">Tier 1 VIP Investor</p>
                </div>
            </div>
            <button onclick="window.open('https://meetings-na2.hubspot.com/anna762', '_blank')" class="w-full py-4 bg-[#b0955b] text-[#17433a] rounded-xl text-[11px] font-black hover:bg-[#a3804f] transition-all shadow-md active:scale-95 flex items-center justify-center gap-2">
                <i class="fa-solid fa-calendar-check text-sm"></i> BOOK ADVISORY
            </button>
        </div>
    </aside>

    <!-- Main Content Panel -->
    <main class="flex-1 overflow-y-auto no-scrollbar relative p-6 md:p-10">
        
        <!-- 【功能 5】通知系统栏 -->
        <div id="notification-banner" class="mb-8 bg-blue-50 border border-blue-200 rounded-2xl p-4 flex items-center justify-between shadow-sm cursor-pointer hover:bg-blue-100 transition-colors" onclick="showSection('portfolio')">
            <div class="flex items-center gap-4">
                <div class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center text-white relative">
                    <i class="fa-solid fa-bell"></i>
                    <span class="absolute top-0 right-0 w-3 h-3 bg-red-500 border-2 border-white rounded-full animate-ping"></span>
                </div>
                <div>
                    <p class="text-sm font-bold text-blue-900">Portfolio Update</p>
                    <p class="text-xs text-blue-700 font-medium">Since your last login: <span class="font-bold text-blue-800">2 milestones reached</span> in RCG Harvest 3 and RCG Parkside.</p>
                </div>
            </div>
            <i class="fa-solid fa-arrow-right text-blue-400"></i>
        </div>

        <!-- View: Overview -->
        <div id="section-overview" class="view-section active space-y-8">
            <header class="flex flex-col lg:flex-row justify-between items-start lg:items-end gap-6 mb-2">
                <div>
                    <h2 class="text-3xl font-black text-[#0a0a0b] tracking-tighter uppercase italic">Institutional <span class="text-[#b0955b]">Snapshot</span></h2>
                    <p class="text-[#717375] text-sm mt-2 font-medium">Consolidated Q3 performance. Metrics verified via internal AM trackers.</p>
                </div>
                <div class="bg-[#17433a] px-8 py-5 rounded-2xl shadow-lg text-right text-white border-b-4 border-[#b0955b]">
                    <p class="text-[#99b2ac] text-[10px] font-black uppercase tracking-widest mb-1 italic tracking-tighter">Active Net Principal</p>
                    <p class="text-3xl font-bold font-mono text-[#b0955b] tracking-tighter">$1,931,866<span class="text-lg">.35</span></p>
                </div>
            </header>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="glass-card p-6 border-b-4 border-[#0a0a0b]">
                    <p class="text-[#717375] text-[11px] font-black uppercase mb-2 tracking-widest italic tracking-tighter">Cumulative Basis</p>
                    <p class="text-3xl font-bold text-[#17433a] tracking-tighter font-mono">$3,240,227</p>
                </div>
                <div class="glass-card p-6 border-b-4 border-[#b0955b]">
                    <p class="text-[#717375] text-[11px] font-black uppercase mb-2 tracking-widest italic tracking-tighter">Capital Returned</p>
                    <p class="text-3xl font-bold text-[#b0955b] tracking-tighter font-mono">$2,220,707</p>
                </div>
                <div class="glass-card p-6 border-b-4 border-[#99b2ac]">
                    <p class="text-[#717375] text-[11px] font-black uppercase mb-2 tracking-widest italic tracking-tighter">Realized Yield</p>
                    <p class="text-3xl font-bold text-[#17433a] font-mono tracking-tighter">$557,105</p>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <!-- 【功能 3】市场对比锚点 -->
                <div class="glass-card p-8 rounded-2xl flex flex-col justify-center">
                    <h3 class="text-xs font-black text-[#17433a] mb-6 uppercase tracking-widest italic">Alpha Performance vs Market</h3>
                    <div class="space-y-6">
                        <div>
                            <div class="flex justify-between items-end mb-2">
                                <span class="text-sm font-bold text-[#17433a]"><i class="fa-solid fa-crown text-[#b0955b] mr-2"></i> Real Int'l Portfolio IRR</span>
                                <span class="text-2xl font-black text-[#b0955b] font-mono">16.8%</span>
                            </div>
                            <div class="w-full bg-stone-100 rounded-full h-3"><div class="bg-[#b0955b] h-3 rounded-full" style="width: 85%"></div></div>
                        </div>
                        <div>
                            <div class="flex justify-between items-end mb-2">
                                <span class="text-sm font-bold text-[#717375]"><i class="fa-solid fa-chart-simple mr-2"></i> US Public REITs Average</span>
                                <span class="text-xl font-bold text-[#717375] font-mono">7.2%</span>
                            </div>
                            <div class="w-full bg-stone-100 rounded-full h-2"><div class="bg-[#717375] h-2 rounded-full" style="width: 45%"></div></div>
                        </div>
                        <p class="text-[10px] text-[#717375] italic bg-stone-50 p-3 rounded-lg border border-stone-200">
                            * Your portfolio outperformed standard public market benchmarks by <span class="font-bold text-[#17433a]">960 bps</span> primarily driven by early entry into core Austin assets.
                        </p>
                    </div>
                </div>
                
                <div class="glass-card p-8">
                    <h3 class="text-xs font-black text-[#17433a] mb-4 uppercase tracking-widest italic">Current Allocation Structure</h3>
                    <div class="chart-container" style="height: 180px;"><canvas id="allocationChart"></canvas></div>
                </div>
            </div>
        </div>

        <!-- View: Portfolio Deep-Dive with Timeline -->
        <div id="section-portfolio" class="view-section space-y-8">
            <header>
                <h2 class="text-3xl font-black text-[#0a0a0b]">Asset Tracker & Milestones</h2>
                <p class="text-[#717375] text-sm mt-2 font-medium italic">Project nomenclature strictly matches official Sponsor reports. Track your capital lifecycle in real-time.</p>
            </header>
            <div class="grid grid-cols-1 gap-8" id="portfolioList"></div>
        </div>

        <!-- View: Simulator (IRR / Exit Projection) -->
        <div id="section-simulator" class="view-section space-y-8">
            <header>
                <h2 class="text-3xl font-black text-[#0a0a0b]">Exit Strategy Simulator</h2>
                <p class="text-[#717375] text-sm mt-2 max-w-2xl font-medium italic">Model your projected returns based on market timing and target holding periods.</p>
            </header>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- 【功能 2】退出预测计算器 -->
                <div class="glass-card p-10 rounded-3xl">
                    <h3 class="text-sm font-black text-[#17433a] mb-8 uppercase tracking-widest italic border-b border-stone-200 pb-4"><i class="fa-solid fa-calculator text-[#b0955b]"></i> Projection Engine</h3>
                    
                    <div class="space-y-10">
                        <div>
                            <label class="flex justify-between items-center text-sm font-bold text-stone-700 mb-4">
                                Target Exit Year
                                <span id="year-display" class="text-2xl font-black text-[#b0955b] font-mono bg-[#b0955b]/10 px-3 py-1 rounded-lg">2027</span>
                            </label>
                            <input type="range" id="exit-year-slider" min="2026" max="2030" value="2027" step="1" oninput="calculateExit()" />
                            <div class="flex justify-between text-[10px] text-stone-400 font-bold mt-2">
                                <span>2026</span><span>2028</span><span>2030+</span>
                            </div>
                        </div>

                        <div class="grid grid-cols-2 gap-6">
                            <div class="bg-stone-50 p-6 rounded-2xl border border-stone-200 text-center">
                                <p class="text-[10px] text-[#717375] font-black uppercase tracking-widest mb-2">Projected Multiple</p>
                                <p class="text-4xl font-black text-[#17433a] font-mono" id="calc-multiple">1.48x</p>
                            </div>
                            <div class="bg-stone-50 p-6 rounded-2xl border border-stone-200 text-center">
                                <p class="text-[10px] text-[#717375] font-black uppercase tracking-widest mb-2">Target IRR</p>
                                <p class="text-4xl font-black text-[#17433a] font-mono" id="calc-irr">18.5%</p>
                            </div>
                        </div>
                        
                        <p class="text-[10px] text-stone-500 italic text-center leading-relaxed">
                            * Projection based on a composite blend of your active core and development assets. Longer hold periods generally compress IRR but maximize total equity multiples.
                        </p>
                    </div>
                </div>

                <!-- 资本部署实验室 (原 Strategy Lab 合并) -->
                <div class="bg-[#17433a] p-10 rounded-3xl text-white shadow-xl relative overflow-hidden">
                    <div class="absolute -top-10 -right-10 w-48 h-48 bg-[#b0955b]/20 rounded-full blur-3xl"></div>
                    <h3 class="text-sm font-black text-[#b0955b] mb-8 uppercase tracking-widest italic relative z-10">Capital Deployment Plan</h3>
                    
                    <div class="space-y-6 relative z-10">
                        <p class="text-sm text-blue-100 font-medium leading-relaxed">You have <span class="text-white font-bold bg-[#b0955b]/40 px-2 py-0.5 rounded">$2,220,707</span> in returned capital ready for redeployment. Select a strategy path:</p>
                        
                        <label class="block cursor-pointer group">
                            <div class="p-5 border border-[#b0955b]/30 rounded-2xl hover:bg-white/10 transition-all flex justify-between items-center">
                                <div>
                                    <h4 class="font-bold text-white">Path A: Immediate Yield</h4>
                                    <p class="text-xs text-blue-200 mt-1">Deploy into 8% Monthly Pay & 15% Notes</p>
                                </div>
                                <i class="fa-solid fa-chevron-right text-[#b0955b] group-hover:translate-x-1 transition-transform"></i>
                            </div>
                        </label>
                        
                        <label class="block cursor-pointer group">
                            <div class="p-5 border border-[#b0955b]/30 rounded-2xl hover:bg-white/10 transition-all flex justify-between items-center">
                                <div>
                                    <h4 class="font-bold text-white">Path B: Max Capital Gain</h4>
                                    <p class="text-xs text-blue-200 mt-1">Deploy into GT-48 IOS Development</p>
                                </div>
                                <i class="fa-solid fa-chevron-right text-[#b0955b] group-hover:translate-x-1 transition-transform"></i>
                            </div>
                        </label>
                        
                        <button onclick="window.open('https://meetings-na2.hubspot.com/anna762', '_blank')" class="w-full mt-4 py-4 bg-white text-[#17433a] rounded-xl font-black shadow-lg hover:bg-stone-100 transition-colors">
                            DISCUSS STRATEGY WITH ANNA
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- View: Company Insights (News from Website) -->
        <div id="section-news" class="view-section space-y-8">
            <header class="flex flex-col lg:flex-row justify-between items-center gap-6 border-b border-stone-200 pb-6 text-center md:text-left">
                <div>
                    <h2 class="text-3xl font-black text-[#0a0a0b] uppercase tracking-tighter italic">Company <span class="text-[#b0955b]">Insights</span></h2>
                    <p class="text-[10px] text-green-600 font-bold uppercase mt-2"><i class="fa-solid fa-circle-check"></i> Sourced directly from RealInternational.com</p>
                </div>
            </header>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="newsGrid"></div>
        </div>

        <!-- 【功能 4】View: Document Vault -->
        <div id="section-vault" class="view-section space-y-8">
            <header>
                <h2 class="text-3xl font-black text-[#0a0a0b] tracking-tighter uppercase italic">Document <span class="text-[#b0955b]">Vault</span></h2>
                <p class="text-[#717375] text-sm mt-2 font-medium italic">Secure access to your tax documents, quarterly reports, and legal memorandums.</p>
            </header>
            
            <div class="bg-white border border-stone-200 rounded-3xl overflow-hidden shadow-sm">
                <table class="w-full text-left border-collapse">
                    <thead>
                        <tr class="bg-stone-50 border-b border-stone-200 text-[10px] font-black uppercase tracking-widest text-[#717375]">
                            <th class="p-6">Document Name</th>
                            <th class="p-6">Category</th>
                            <th class="p-6">Date Added</th>
                            <th class="p-6 text-right">Action</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-stone-100 text-sm font-medium text-stone-800">
                        <tr class="hover:bg-stone-50 transition-colors">
                            <td class="p-6 flex items-center gap-3"><i class="fa-solid fa-file-pdf text-red-500 text-lg"></i> 2025 Q3 Consolidated Portfolio Report.pdf</td>
                            <td class="p-6"><span class="bg-blue-50 text-blue-600 px-2 py-1 rounded text-xs font-bold">Quarterly Report</span></td>
                            <td class="p-6">Oct 15, 2025</td>
                            <td class="p-6 text-right"><button onclick="alert('Downloading Secure PDF...')" class="text-[#b0955b] hover:text-[#17433a] font-bold"><i class="fa-solid fa-cloud-arrow-down"></i> Download</button></td>
                        </tr>
                        <tr class="hover:bg-stone-50 transition-colors">
                            <td class="p-6 flex items-center gap-3"><i class="fa-solid fa-file-invoice-dollar text-green-500 text-lg"></i> RCG Harvest 3 - 2024 Schedule K-1.pdf</td>
                            <td class="p-6"><span class="bg-green-50 text-green-600 px-2 py-1 rounded text-xs font-bold">Tax Document</span></td>
                            <td class="p-6">Mar 10, 2025</td>
                            <td class="p-6 text-right"><button onclick="alert('Downloading Tax File...')" class="text-[#b0955b] hover:text-[#17433a] font-bold"><i class="fa-solid fa-cloud-arrow-down"></i> Download</button></td>
                        </tr>
                        <tr class="hover:bg-stone-50 transition-colors">
                            <td class="p-6 flex items-center gap-3"><i class="fa-solid fa-file-contract text-stone-500 text-lg"></i> GT-48 Private Placement Memorandum.pdf</td>
                            <td class="p-6"><span class="bg-stone-100 text-stone-600 px-2 py-1 rounded text-xs font-bold">Legal / Offering</span></td>
                            <td class="p-6">Jan 05, 2026</td>
                            <td class="p-6 text-right"><button onclick="alert('Downloading PPM...')" class="text-[#b0955b] hover:text-[#17433a] font-bold"><i class="fa-solid fa-cloud-arrow-down"></i> Download</button></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

    </main>

    <script>
        // =====================================================================
        // 【功能 6】官网溯源新闻库 (Company Insights)
        // 预留了直接 fetch 公司官网 WordPress REST API 的能力。
        // 为了防止 Demo 白屏，此处使用具有“高度公司属性”的 Mock 数据。
        // =====================================================================
        const COMPANY_NEWS_DATA = [
            { 
                cat: 'Updates', src: 'Real International', date: 'Feb 2026', 
                title: 'Market Update: East Austin Continues to Capture Tech Migration', 
                link: 'https://realinternational.com/',
                summary: 'Our internal research team analyzes the recent influx of headquarters to Austin and its direct impact on our core residential portfolio.', 
                ir: 'Direct confirmation of our thesis regarding Mueller and Cielo.' 
            },
            { 
                cat: 'Updates', src: 'Real International', date: 'Jan 2026', 
                title: 'RCG Portfolio Achieves Key Construction Milestones in Q4', 
                link: 'https://realinternational.com/',
                summary: 'An update on the successful topping out of multiple units in our development pipelines, securing investor timelines.', 
                ir: 'Highlights the execution capability of our Asset Management team.' 
            },
            { 
                cat: 'Research', src: 'Real International', date: 'Dec 2025', 
                title: 'Why Industrial Outdoor Storage (IOS) is the Asset Class of 2026', 
                link: 'https://realinternational.com/',
                summary: 'A deep dive into how supply chain shifts along SH-130 are creating outsized returns for entitled land assets.', 
                ir: 'Provides the fundamental logic supporting our GT-48 offering.' 
            }
        ];

        // =====================================================================
        // 【功能 3】带生命周期时间轴的项目数据 (Milestones added)
        // =====================================================================
        const PROJECTS = [
            { 
                name: "RCG REAL Orchard", principal: 700000, dist: 478491, official: "Stabilized operations. 4.2% NOI growth verified with 97% occupancy.", type: "Stabilized Lease", vibe: "vibe-growth",
                milestones: [{n: "Acquisition", s: "done"}, {n: "Stabilization", s: "done"}, {n: "Yield Harvesting", s: "active"}, {n: "Exit Event", s: "pending"}]
            },
            { 
                name: "RCG Harvest 3", principal: 495080.35, dist: 0, official: "Vertical construction ongoing. Preparing for Listing & Sales.", type: "Residential Dev", vibe: "vibe-growth",
                milestones: [{n: "Entitlement", s: "done"}, {n: "Vertical Build", s: "active"}, {n: "Listing & Sales", s: "pending"}, {n: "Capital Return", s: "pending"}]
            },
            { 
                name: "Mueller Parkside", principal: 250000, dist: 0, official: "Residential closed. Commercial units listed via broker.", type: "Core Retail", vibe: "vibe-stable",
                milestones: [{n: "Development", s: "done"}, {n: "Resi Sell-out", s: "done"}, {n: "Comm Listing", s: "active"}, {n: "Final Exit", s: "pending"}]
            },
            { 
                name: "VC", principal: 200000, dist: 0, official: "Leasing activity in progress. Strategic asset optimization ongoing.", type: "Class A Office", vibe: "vibe-stable",
                milestones: [{n: "Acquisition", s: "done"}, {n: "Value-Add CapEx", s: "done"}, {n: "Lease-Up", s: "active"}, {n: "Refi / Sale", s: "pending"}]
            }
        ];

        let allocChartInstance = null;

        function showSection(id) {
            try {
                document.querySelectorAll('.view-section').forEach(s => s.classList.remove('active'));
                const target = document.getElementById('section-' + id);
                if(target) target.classList.add('active');
                
                document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('nav-active'));
                const btn = document.getElementById('nav-' + id);
                if(btn) btn.classList.add('nav-active');

                // Hide notification banner if viewing portfolio
                if(id === 'portfolio') {
                    document.getElementById('notification-banner').style.display = 'none';
                }
            } catch (e) { console.error("Nav error:", e); }
        }

        // 渲染包含时间轴的项目
        function renderPortfolio() {
            const list = document.getElementById('portfolioList');
            if(!list) return;
            
            list.innerHTML = PROJECTS.map(p => {
                // 构建时间轴 HTML
                const timelineHtml = p.milestones.map((m, idx) => {
                    let color = m.s === 'done' ? 'bg-[#b0955b] border-[#b0955b]' : m.s === 'active' ? 'bg-white border-[#b0955b] border-4' : 'bg-stone-200 border-stone-200';
                    let textColor = m.s === 'active' ? 'text-[#b0955b] font-bold' : m.s === 'done' ? 'text-stone-700 font-bold' : 'text-stone-400';
                    let line = idx < p.milestones.length - 1 ? `<div class="w-12 h-1 ${m.s === 'done' ? 'bg-[#b0955b]' : 'bg-stone-200'} mt-3"></div>` : '';
                    return `
                        <div class="flex flex-col items-center text-center w-24">
                            <div class="w-6 h-6 rounded-full ${color} z-10 shadow-sm flex items-center justify-center">
                                ${m.s === 'done' ? '<i class="fa-solid fa-check text-[10px] text-white"></i>' : ''}
                            </div>
                            <p class="text-[9px] mt-2 uppercase tracking-tight ${textColor} leading-tight">${m.n}</p>
                        </div>
                        ${line}
                    `;
                }).join('');

                return `
                <div class="glass-card overflow-hidden group hover:shadow-lg transition-all ${p.vibe} rounded-[2rem]">
                    <div class="p-8 flex flex-col lg:flex-row gap-8 items-center">
                        <div class="lg:w-1/4 border-r border-stone-100 pr-6">
                            <span class="text-[9px] font-black uppercase tracking-[0.2em] text-[#b0955b] bg-[#f3eee4] px-2 py-1 rounded">${p.type}</span>
                            <h4 class="text-xl font-black text-[#0a0a0b] mt-4 mb-2 leading-tight uppercase italic">${p.name}</h4>
                            <p class="text-sm font-mono font-bold text-[#17433a] border-b border-stone-100 pb-2">$${p.principal.toLocaleString()}</p>
                            ${p.dist > 0 ? `<p class="text-xs font-mono font-bold text-[#b0955b] mt-2">+ $${p.dist.toLocaleString()} Dist.</p>` : ''}
                        </div>
                        
                        <div class="lg:w-1/2 flex justify-center items-start pt-2">
                            <!-- 时间轴渲染 -->
                            <div class="flex items-start justify-center w-full">
                                ${timelineHtml}
                            </div>
                        </div>

                        <div class="lg:w-1/4 bg-stone-50 p-4 rounded-xl border border-stone-200 text-xs text-stone-600 italic font-medium leading-relaxed">
                            "${p.official}"
                        </div>
                    </div>
                </div>`;
            }).join('');
        }

        // 渲染公司新闻
        function renderNews() {
            const grid = document.getElementById('newsGrid');
            if(!grid) return;
            
            // Note for Anna: If you want to fetch real WP posts from your site, uncomment the block below and adjust URL.
            /*
            fetch('https://realinternational.com/wp-json/wp/v2/posts?per_page=3')
              .then(res => res.json())
              .then(posts => { ... map posts to grid ... })
            */

            grid.innerHTML = COMPANY_NEWS_DATA.map(n => `
                <div class="glass-card p-8 space-y-4 group hover:shadow-lg transition-all flex flex-col justify-between">
                    <div>
                        <div class="flex justify-between items-center mb-4">
                            <span class="text-[9px] font-black uppercase tracking-[0.2em] text-[#b0955b] bg-[#17433a] px-2 py-1 rounded">${n.cat}</span>
                            <span class="text-[9px] font-black uppercase text-stone-400 italic">${n.date}</span>
                        </div>
                        <h4 class="text-base font-black text-[#0a0a0b] leading-tight mb-2">${n.title}</h4>
                        <p class="text-[11px] text-[#717375] leading-relaxed font-medium">Excerpt: ${n.summary}</p>
                    </div>
                    <div class="pt-4 mt-4 border-t border-stone-200">
                        <a href="${n.link}" target="_blank" class="text-[10px] font-black text-blue-600 uppercase hover:underline flex items-center gap-1 italic tracking-widest">READ ON REALINTERNATIONAL.COM <i class="fa-solid fa-arrow-up-right-from-square"></i></a>
                    </div>
                </div>`).join('');
        }

        // 【功能 2】退出计算器逻辑
        function calculateExit() {
            const year = parseInt(document.getElementById('exit-year-slider').value);
            document.getElementById('year-display').innerText = year;
            
            // 简单拟合算法：持有越久，Multiple越高，IRR轻微衰减/平稳
            const yearsHeld = year - 2025; // Base year 2025
            
            let multiple = 1.0;
            let irr = 0;

            if (year === 2026) { multiple = 1.25; irr = 25.0; }
            else if (year === 2027) { multiple = 1.48; irr = 18.5; }
            else if (year === 2028) { multiple = 1.75; irr = 16.2; }
            else if (year === 2029) { multiple = 1.95; irr = 14.8; }
            else if (year === 2030) { multiple = 2.20; irr = 14.0; }

            document.getElementById('calc-multiple').innerText = multiple.toFixed(2) + 'x';
            document.getElementById('calc-irr').innerText = irr.toFixed(1) + '%';
        }

        window.onload = function() {
            try {
                renderPortfolio(); 
                renderNews();
                calculateExit(); // Init calculator
                
                const allocCtx = document.getElementById('allocationChart')?.getContext('2d');
                if(allocCtx) {
                    allocChartInstance = new Chart(allocCtx, {
                        type: 'doughnut', data: { labels: ['Stabilized', 'Development', 'Commercial', 'Defensive'], datasets: [{ data: [1050000, 495080, 200000, 186786], backgroundColor: ['#17433a', '#b0955b', '#99b2ac', '#717375'], borderWidth: 0, hoverOffset: 10 }] },
                        options: { maintainAspectRatio: false, cutout: '80%', plugins: { legend: { position: 'right', labels: { usePointStyle: true, padding: 15, font: { size: 10, weight: 'bold' } } } } }
                    });
                }
            } catch (e) { console.error("Init error:", e); }
        };
    </script>
</body>
</html>
